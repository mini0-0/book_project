{% extends 'book/base.html' %}
{% load static %}


{% block content %}
    
    <link rel="stylesheet" type="text/css" href = "{% static 'css/recommend_style.css' %}?after">
    {% comment %} <hr> {% endcomment %}
    <header class="site-header navbar">
        <h2 id="title">{{ user.nickname}}님 맞춤 랜덤 책 리스트 </h2>
    <div class="random">
        {% comment %} {% for t in wishlist_title%}
            <p><h2 id="hashtag"> #{{ t }}와 유사한 책</h2><p>
        {% endfor %} {% endcomment %}
            <div style="display: flex;">
                <table>
                    <tr>
                
                {% for i in re_list%}
                    {% for b in i %}
                    <td>
                        <div class="flex-container book">
                            <section id="pageSection">
                                <div class="page" id="page1">
                                    <a href={% url 'book-detail' b.book_isbn %}>
                                        <img src="{{ b.book_img_url }}" alt="My Image" width=200px height=auto>
                                    </a>
                                </div>
                                <div class="page" id="page2">
                                    <a href={% url 'book-detail' b.book_isbn %}>
                                        <h3> {{ b.book_title }}</h3>
                                        <h5> 작가 : {{ b.book_author }} </h3>
                                        <h5> 출판사 : {{ b.book_publisher }} </h3>
                                        <h5> 장르 : {{ b.genre_name }} </h3>
                                    </a>
                                </div>
                            </section>
                        </div>
                    </td>
                    {% if forloop.counter|divisibleby:5 %}
                    </tr>
                    <tr>
                    {% endif %}
                  {% endfor %}
                {% endfor %}
            </tr>
        </table>
             
            </div>
        
    <div>

    <ul class="pagination">
        <!-- 이전 페이지 -->
            {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}"> ◀ </a>
            </li>
            {% endif %}

            <!-- 이전페이지가 없는 경우 -->
            {% if page_obj.number > page_size|add:'1' %}
                <li class="page-item"><a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q }}&page=1">1</a></li>
                <li class="page-item"><span class="page-link">...</span></li>
            {% endif %}

            <!-- page list -->
            {% for page_number in page_range %}
                {% if page_number == page_obj.number %}
                <li class="page-item active" aria-current="page">
                    <a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q }}&page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% else %}
                <li class="page-item">
                    <a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q }}&page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% endif %}
            {% endfor %}

            <!-- next page -->
            {% if page_obj.number|add:page_size < max_index %}
                <li class="page-item"><span class="page-link">...</span></li>
                <li class="page-item"><a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q }}&page={{ max_index }}">{{ max_index }}</a></li>
            {% endif %}
            
            {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="/search/?option_select={{ request.GET.option_select }}&q={{ request.GET.q}}&page={{ page_obj.next_page_number }}">▶</a>
            </li>
            {% endif %}  
        </ul>


{% endblock content %}